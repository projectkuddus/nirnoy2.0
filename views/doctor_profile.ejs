<%- include('partials/header') %>
<%- include('partials/flash') %>

<div class="wrap doctor-profile">
  <nav class="breadcrumb">
    <a href="/">Home</a>
    <span>/</span>
    <a href="/doctors">Doctors</a>
    <span>/</span>
    <span><%= doctor && doctor.name ? doctor.name : 'Doctor' %></span>
  </nav>

  <section class="doctor-hero">
    <div class="doctor-hero__main">
      <div class="doctor-hero__avatar">
        <% if (doctor && doctor.photo_url) { %>
          <img src="<%= doctor.photo_url %>" alt="Photo of <%= doctor.name %>">
        <% } else { %>
          <div class="doctor-hero__avatar-placeholder"><span>Dr</span></div>
        <% } %>
      </div>
      <div class="doctor-hero__info">
        <p class="eyebrow">Nirnoy doctor</p>
        <h1><%= doctor.name %></h1>
        <p class="doctor-hero__specialty">
          <%= doctor.specialty || 'Doctor' %>
          <% if (doctor.area) { %>
            · <span><%= doctor.area %></span>
          <% } %>
        </p>
        <% if (doctor.fee) { %>
          <p class="doctor-hero__fee">Typical visit fee: ৳ <%= doctor.fee %></p>
        <% } %>
        <% if (stats && typeof stats.totalCompleted === 'number') { %>
          <p class="doctor-hero__meta"><%= stats.totalCompleted %> completed visits via Nirnoy</p>
        <% } %>
        <div class="doctor-hero__actions">
          <% if (doctor && doctor.uid) { %>
            <a href="/book?doctorId=<%= doctor.uid %>" class="btn primary">
              Book appointment
            </a>
          <% } %>
        </div>
      </div>
    </div>
  </section>

  <section class="doctor-layout">
    <div class="doctor-layout__main">
      <div class="card">
        <h2>About this doctor</h2>
        <p class="muted">
          This is a pilot profile. As Nirnoy grows, doctors will be able to add
          their own biography, education and special interests here.
        </p>
      </div>

      <div class="card" style="margin-top:18px;">
        <h2>Clinics &amp; visiting locations</h2>
        <% if (!clinics || !clinics.length) { %>
          <p class="empty">
            This doctor hasn’t added any clinics yet. Once clinics are added,
            you’ll see them here.
          </p>
        <% } else { %>
          <ul class="clinic-list">
            <% clinics.forEach(c => { %>
              <li class="clinic-card">
                <h3><%= c.name || 'Clinic' %></h3>
                <% if (c.address) { %>
                  <p class="clinic-card__line"><%= c.address %></p>
                <% } %>
                <% if (c.area) { %>
                  <p class="clinic-card__line"><%= c.area %></p>
                <% } %>
              </li>
            <% }) %>
          </ul>
        <% } %>
      </div>
    </div>

    <aside class="doctor-layout__side">
      <div class="card side-card">
        <h3>How Nirnoy works</h3>
        <ol>
          <li>Find your doctor from the directory.</li>
          <li>Book a time slot that works for you.</li>
          <li>Fill out a short health form before your visit.</li>
          <li>See your queue position and ETA on visit day.</li>
        </ol>
      </div>
    </aside>
  </section>
</div>

<%- include('_footer') %>
